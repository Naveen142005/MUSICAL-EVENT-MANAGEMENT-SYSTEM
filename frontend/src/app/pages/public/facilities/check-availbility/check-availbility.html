<div
    id="availability-modal"
    class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"
>
    <div
        class="card-elegant rounded-3xl p-8 w-full max-w-md shadow-2xl max-h-[90vh] overflow-y-auto"
    >
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-display font-bold text-slate-900">Check Availability</h3>
            <button
                id="close-modal"
                class="text-slate-500 hover:text-slate-700 p-2"
                (click)="close()"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-x w-6 h-6"
                >
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <div class="mb-6">
            <h4 id="venue-name-modal" class="text-lg font-semibold text-purple-600">
                {{ venueName }}
            </h4>
        </div>

        <form id="availability-form" (submit)="checkAvailability(); $event.preventDefault()">
            <div class="mb-4">
                <label class="block text-sm font-semibold text-slate-700 mb-3">Select Date</label>
                <input
                    type="date"
                    [(ngModel)]="selectedDate"
                    name="selectedDate"
                    id="check-date"
                    class="w-full px-4 py-3 border border-slate-200 rounded-xl input-focus transition-all bg-white"
                    required
                />
            </div>

            <div class="mb-6">
                <label class="block text-sm font-semibold text-slate-700 mb-3"
                    >Select Time Slot</label
                >
                <select
                    [(ngModel)]="selectedSlot"
                    name="selectedSlot"
                    id="time-slot"
                    class="w-full px-4 py-3 border border-slate-200 rounded-xl input-focus transition-all bg-white"
                    required
                >
                    <option value="">Choose time slot</option>
                    <option value="Morning">Morning (9:00 AM - 12:00 PM)</option>
                    <option value="Afternoon">Afternoon (12:00 PM - 6:00 PM)</option>
                    <option value="Night">Night (6:00 PM - 11:00 PM)</option>
                </select>
            </div>

            <!-- Error Message -->
            @if (errorMessage) {
            <div class="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
                {{ errorMessage }}
            </div>
            }

            <button
                type="submit"
                [disabled]="isLoading"
                class="w-full bg-gradient-to-r from-purple-600 to-purple-700 text-white py-4 rounded-xl font-semibold hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
            >
                {{ isLoading ? 'Checking...' : 'Check Availability' }}
            </button>
        </form>

        <!-- Availability Result -->
        @if (availabilityResult) {
        <div
            id="availability-result"
            class="mt-4 p-4 rounded-lg"
            [class.bg-green-50]="availabilityResult.res"
            [class.bg-red-50]="!availabilityResult.res"
        >
            <p
                class="font-semibold"
                [class.text-green-700]="availabilityResult.res"
                [class.text-red-700]="!availabilityResult.res"
            >
                {{availabilityResult.res ? 'Available! ' : 'Not Available' }}
                
            </p>
            
        </div>
        }
    </div>
</div>
